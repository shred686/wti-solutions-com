---
export interface Props {
  transparent?: boolean;
}

const { transparent = false } = Astro.props;
---

<header 
  id="main-header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300"
  class:list={{
    'bg-transparent': transparent,
    'backdrop-blur-sm border-b border-[#2a2a2a]': !transparent
  }}
  data-transparent={transparent}
  style={transparent ? 'background-color: transparent;' : 'background: #1a1a1a; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);'}
>
  <style>
    /* Hover effects for navigation links */
    .nav-link:hover {
      color: #e5e5e5 !important;
    }
    
    /* Hover effects for CTA button when on dark background */
    #header-cta:hover {
      background-color: #2a2a2a !important;
      color: #e5e5e5 !important;
    }
    
    /* Hover effects for transparent background */
    .bg-transparent .nav-link:hover {
      color: #ffffff !important;
    }
    
    .bg-transparent #header-cta:hover {
      background-color: #1c222e !important;
    }
  </style>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="/" class="text-2xl font-bold transition-colors text-[#e5e5e5]" id="header-logo">
          WTI Solutions
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        <a href="#who-we-are" class="px-3 py-2 text-sm font-medium transition-colors nav-link text-[#b0b0b0]">
          Who We Are
        </a>
        <a href="#what-we-do" class="px-3 py-2 text-sm font-medium transition-colors nav-link text-[#b0b0b0]">
          What We Do
        </a>
        <a href="#careers" class="px-3 py-2 text-sm font-medium transition-colors nav-link text-[#b0b0b0]">
          Careers
        </a>
        <a href="#news" class="px-3 py-2 text-sm font-medium transition-colors nav-link text-[#b0b0b0]">
          News
        </a>
        <a href="#contact" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors text-[#e5e5e5] border border-[#2a2a2a] hover:bg-[#2a2a2a] hover:text-[#e5e5e5]" id="header-cta">
          Get Started
        </a>
      </nav>

      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button id="mobile-menu-button" type="button" class="bg-transparent p-2 rounded-md text-[#e5e5e5] hover:text-[#b0b0b0] focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[#e5e5e5]" aria-controls="mobile-menu" aria-expanded="false">
          <span class="sr-only">Open main menu</span>
          <!-- Menu icon -->
          <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div class="md:hidden" id="mobile-menu">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-[#1a1a1a] border-t border-[#2a2a2a]">
        <a href="#who-we-are" class="text-[#b0b0b0] hover:text-[#e5e5e5] block px-3 py-2 text-base font-medium">
          Who We Are
        </a>
        <a href="#what-we-do" class="text-[#b0b0b0] hover:text-[#e5e5e5] block px-3 py-2 text-base font-medium">
          What We Do
        </a>
        <a href="#careers" class="text-[#b0b0b0] hover:text-[#e5e5e5] block px-3 py-2 text-base font-medium">
          Careers
        </a>
        <a href="#news" class="text-[#b0b0b0] hover:text-[#e5e5e5] block px-3 py-2 text-base font-medium">
          News
        </a>
        <a href="#contact" class="bg-[#2a2a2a] text-[#e5e5e5] block px-3 py-2 rounded-md text-base font-medium hover:bg-[#1a1a1a]">
          Get Started
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.getElementById('main-header');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const isTransparent = header?.getAttribute('data-transparent') === 'true';

    // Mobile menu functionality
    mobileMenuButton?.addEventListener('click', () => {
      mobileMenu?.classList.toggle('hidden');
    });

    // Close mobile menu when clicking on links
    const mobileLinks = mobileMenu?.querySelectorAll('a');
    mobileLinks?.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu?.classList.add('hidden');
      });
    });

    // Scroll effect for transparent header
    if (isTransparent && header) {
      const updateHeaderBackground = () => {
        const scrollY = window.scrollY;
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        
        if (scrollY > 50) {
          // Dark background when scrolled
          header.style.background = '#1a1a1a';
          header.style.backdropFilter = 'blur(12px)';
          header.style.webkitBackdropFilter = 'blur(12px)';
          header.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.2)';
          header.style.borderBottom = '1px solid #2a2a2a';
          header.classList.remove('bg-transparent');
          
          // Update text colors for dark background
          const logo = document.getElementById('header-logo');
          const navLinks = document.querySelectorAll('.nav-link');
          const ctaButton = document.getElementById('header-cta');
          
          if (logo) logo.style.color = '#e5e5e5';
          navLinks.forEach(link => {
            link.style.color = '#b0b0b0';
          });
          if (ctaButton) {
            ctaButton.style.backgroundColor = 'transparent';
            ctaButton.style.color = '#e5e5e5';
            ctaButton.style.border = '1px solid #2a2a2a';
          }
          if (mobileMenuButton) {
            mobileMenuButton.style.color = '#e5e5e5';
            mobileMenuButton.style.backgroundColor = 'transparent';
          }
        } else {
          // Transparent background when at top
          header.style.backgroundColor = 'transparent';
          header.style.background = 'transparent';
          header.style.opacity = '1';
          header.style.backdropFilter = 'none';
          header.style.borderBottom = 'none';
          header.classList.add('bg-transparent');
          
          // Update text colors for transparent background
          const logo = document.getElementById('header-logo');
          const navLinks = document.querySelectorAll('.nav-link');
          const ctaButton = document.getElementById('header-cta');
          
          if (logo) logo.style.color = '#ffffff';
          navLinks.forEach(link => {
            link.style.color = '#ffffff';
          });
          if (ctaButton) {
            ctaButton.style.backgroundColor = 'transparent';
            ctaButton.style.color = '#ffffff';
            ctaButton.style.border = '1px solid #ffffff';
          }
          if (mobileMenuButton) {
            mobileMenuButton.style.color = '#ffffff';
            mobileMenuButton.style.backgroundColor = 'transparent';
          }
        }
      };

      // Listen for scroll events
      window.addEventListener('scroll', updateHeaderBackground);
      
      // Initial setup
      updateHeaderBackground();
    }
  });
</script> 